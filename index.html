<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>최성진의 HR & Honor Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #0f172a; color: white; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .hover-card:hover { transform: translateY(-10px); transition: all 0.3s ease; border-color: #fbbf24; }
        #chat-messages::-webkit-scrollbar { width: 4px; }
        #chat-messages::-webkit-scrollbar-track { background: transparent; }
        #chat-messages::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .message-bubble { word-break: break-word; line-height: 1.6; }
    </style>
</head>
<body class="min-h-screen">

    <!-- 상단 네비게이션 -->
    <nav class="p-6 flex justify-between items-center border-b border-slate-800 glass sticky top-0 z-50">
        <div class="text-2xl font-bold bg-gradient-to-r from-yellow-400 to-amber-600 bg-clip-text text-transparent">
            HR Professional Hub
        </div>
        <div class="hidden md:flex gap-8 text-sm font-medium">
            <a href="#" class="text-yellow-500">Home</a>
            <a href="honor_list.html" class="hover:text-yellow-400 transition">명예의 전당</a>
            <a href="javascript:void(0)" onclick="toggleChat()" class="hover:text-yellow-400 transition text-blue-400 font-bold">HR 챗봇</a>
        </div>
    </nav>

    <!-- 메인 비주얼 -->
    <header class="py-20 px-6 text-center">
        <div class="inline-block px-4 py-1 rounded-full bg-slate-800 text-yellow-500 text-xs font-bold mb-4 border border-slate-700">
            PERSONAL & PROFESSIONAL ARCHIVE
        </div>
        <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight">
            사람의 가치를 기록하고<br><span class="text-yellow-500">지능형 서비스</span>를 제공합니다
        </h1>
        <p class="text-slate-400 max-w-2xl mx-auto text-lg">
            HR혁신그룹 최성진의 개인 아카이브입니다. 퇴직 임원분들의 명예로운 기록을 보존하고, 임직원을 위한 스마트한 복지 안내 서비스를 제공합니다.
        </p>
    </header>

    <!-- 메뉴 카드 섹션 -->
    <section class="max-w-6xl mx-auto px-6 py-12 grid md:grid-cols-2 gap-8">
        <a href="honor_list.html" class="glass p-10 rounded-3xl hover-card block group">
            <div class="w-16 h-16 bg-yellow-500/20 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-yellow-500 transition">
                <i class="fa-solid fa-medal text-3xl text-yellow-500 group-hover:text-slate-900"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4 text-white">Honor & Respect</h2>
            <p class="text-slate-400 leading-relaxed mb-6">
                회사를 위해 헌신하신 임원분들의 발자취를 기립니다. GYS테크 임원분의 기록을 만나보세요.
            </p>
            <div class="text-yellow-500 font-bold flex items-center gap-2">
                입장하기 <i class="fa-solid fa-arrow-right"></i>
            </div>
        </a>

        <div onclick="toggleChat()" class="glass p-10 rounded-3xl hover-card cursor-pointer group">
            <div class="w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-blue-500 transition">
                <i class="fa-solid fa-robot text-3xl text-blue-400 group-hover:text-white"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4 text-white">Smart HR Welfare</h2>
            <p class="text-slate-400 leading-relaxed mb-6">
                후생복지, 연차, 사내 규정 등 궁금한 점을 질문하세요. AI 챗봇이 24시간 친절하게 답변해 드립니다.
            </p>
            <div class="text-blue-400 font-bold flex items-center gap-2">
                챗봇 대화하기 <i class="fa-solid fa-comment"></i>
            </div>
        </div>
    </section>

    <!-- 🤖 챗봇 위젯 -->
    <div id="chat-window" class="fixed bottom-6 right-6 w-96 h-[600px] glass rounded-2xl shadow-2xl z-[100] hidden flex flex-col overflow-hidden border border-blue-500/30">
        <div class="bg-blue-600 p-4 flex justify-between items-center shadow-lg">
            <div class="flex items-center gap-3 text-white">
                <i class="fa-solid fa-robot animate-bounce"></i>
                <span class="font-bold">GYS테크 HR 지능형 가이드</span>
            </div>
            <button onclick="toggleChat()" class="text-white hover:rotate-90 transition-transform"><i class="fa-solid fa-xmark"></i></button>
        </div>
        
        <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-4 text-sm bg-slate-900/50">
            <div class="flex gap-2">
                <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none border border-slate-700 max-w-[85%] text-slate-200 message-bubble">
                    반갑습니다! GYS테크 HR 혁신그룹의 AI 가이드입니다. <br><br>
                    규정 원문과 길라잡이를 모두 학습하여 **휴직, 퇴직, 출장, 포상** 등 모든 인사 노무 사항에 대해 상세히 답변해 드릴 수 있습니다. 😊
                </div>
            </div>
        </div>

        <div class="p-4 bg-slate-800/80 border-t border-slate-700 flex gap-2">
            <input id="user-input" type="text" placeholder="질문을 입력하세요..." 
                   class="flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                   onkeypress="if(event.keyCode==13) sendMessage()">
            <button onclick="sendMessage()" class="bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script>
        const apiKey = "AIzaSyC58lZ5lqIPo0TeWMTMQsF36Loi_mO9l0s"; 
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'gys-hr-hub';

        function toggleChat() {
            const win = document.getElementById('chat-window');
            win.classList.toggle('hidden');
            if(!win.classList.contains('hidden')) {
                document.getElementById('user-input').focus();
            }
        }

        async function fetchWithRetry(url, options, retries = 5, delay = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (err) {
                if (retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithRetry(url, options, retries - 1, delay * 2);
                }
                throw err;
            }
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const messages = document.getElementById('chat-messages');
            const userText = input.value.trim();

            if (!userText) return;

            messages.innerHTML += `
                <div class="flex justify-end">
                    <div class="bg-blue-600 text-white p-3 rounded-2xl rounded-tr-none max-w-[85%] shadow-md message-bubble text-right">
                        ${userText}
                    </div>
                </div>`;
            
            input.value = '';
            messages.scrollTop = messages.scrollHeight;

            const loadingId = 'loading-' + Date.now();
            messages.innerHTML += `
                <div id="${loadingId}" class="flex gap-2">
                    <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none border border-slate-700 max-w-[85%] text-slate-400">
                        <i class="fa-solid fa-circle-notch fa-spin mr-2"></i> 규정을 확인하고 있습니다...
                    </div>
                </div>`;
            messages.scrollTop = messages.scrollHeight;

            try {
                const systemPrompt = `
                    당신은 포스코 GYS테크의 'HR 지능형 가이드'입니다. 제공된 [GYS테크 통합 HR 데이터베이스]를 바탕으로 답변하세요.
                    
                    [1. 인사 및 승진 (직무스킬레벨 SL)]
                    - 단계: SL1~SL7 (정비명장). 호칭은 전원 '프로'.
                    - 인사평가 등급: S(125%), A(110%), B+/B(100%), C(90%), D(0%) 임금인상률 적용.
                    - 승진: SL 인증자 + 인사고과 충족자. 표준근속: SL1->SL4(각 4~7년), SL5~7(각 4년).

                    [2. 급여 및 각종 수당]
                    - 구성: 직무스킬급(기초급+가산급), 직책수당, 직무환경수당, 중식비, 자기계발비, 보전수당.
                    - 고정수당: 중식비(12만원), 자기계발지원금(20만원, 수습 제외), 직무환경수당(현장 5만/본사 2.5만).
                    - 변동수당: 돌발교통비(평일 22시전 3만, 이후/휴일 8만), 철야수당(4~6시간 7만, 6시간이상 10만).
                    - 상여금: 성과상여금(영업이익에 따라 600~800%), 명절상여금(설/추석 각 100만원).

                    [3. 휴직 및 복직]
                    - 건강상 휴직: 15일 이상 요양 필요 시 최대 2년. 통상임금 80% 지급.
                    - 육아휴직: 만 8세 이하 자녀 대상 최대 1년. 급여 불지급.
                    - 가족돌봄휴직: 최장 90일(1회 30일 이상). 급여 불지급.
                    - 복직: 사유 소멸 시 복직희망일 5일 전까지 복직원 제출.

                    [4. 휴가 및 경조사]
                    - 연차: 1년 미만 1개월 개근 시 1일, 1년 이상 기본 15일(매 2년마다 1일 추가, 최대 25일).
                    - 청원휴가: 본인결혼(7일), 자녀결혼(2일), 회갑(부모/배우자부모 2일), 사망(본인부모/배우자 7일, 배우자부모 5일).
                    - 배우자출산휴가: 10일 유급 (분할 사용 가능).

                    [5. 복리후생 상세]
                    - 자녀장학금: 근속 1년 이상 정규직. 만1~15세 연 100만원. 고교/대학교 실비 지원(2자녀 이하 8천만, 3자녀 1.2억, 4자녀 이상 1.6억 한도).
                    - 복지포인트: 연간 99만원. 학원, 의료비, 여행, 주유 등 사용 가능.
                    - 출산장려금: 첫째 100만, 둘째 200만, 셋째이상 300만.
                    - 기숙사: 성호아파트, 목련빌라 등 입사 후 2년간 거주 가능. 주택임차지원 월 30만원(1년).

                    [6. 퇴직 및 복무]
                    - 당연퇴직: 사망, 정년(만 60세), 근로계약 만료 등.
                    - 의원면직: 본인 희망 시 사직원 7일 전 제출.
                    - 포상: 사장표창(개인 30만/단체 100만), 실장표창(개인 20만/단체 50만).
                    - 징계: 경고, 견책, 감봉, 정직, 권고해직, 징계면직.

                    [7. 출장 및 여비]
                    - 교통비: KTX/새마을호 일반석 실비.
                    - 숙박비: 1박당 7만원 한도 실비.
                    - 소액경비(식비 등): 1일당 3.3만원 정액.

                    [답변 지침]
                    - 문서에 명시된 숫자를 정확히 언급하세요.
                    - 가독성을 위해 불렛 포인트와 마크다운을 사용하세요.
                    - 모르는 내용은 "인사팀 최성진 프로님께 문의하세요"라고 안내하세요.
                `;

                const response = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: userText }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    }
                );

                const aiResponse = response.candidates?.[0]?.content?.parts?.[0]?.text || "답변을 가져오지 못했습니다.";
                
                const loadingMsg = document.getElementById(loadingId);
                loadingMsg.innerHTML = `
                    <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none border border-slate-700 max-w-[85%] text-slate-200 message-bubble">
                        ${aiResponse.replace(/\n/g, '<br>')}
                    </div>`;
                
            } catch (err) {
                const loadingMsg = document.getElementById(loadingId);
                loadingMsg.innerHTML = `
                    <div class="bg-red-900/40 p-3 rounded-2xl rounded-tl-none border border-red-500/50 max-w-[85%] text-red-100 message-bubble">
                        서버와 연결이 원활하지 않습니다. 인사팀(최성진)으로 문의 바랍니다.
                    </div>`;
            }
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>
</html>
